{"ast":null,"code":"import { RETRY_MODES } from \"./config\";\nimport { DefaultRateLimiter } from \"./DefaultRateLimiter\";\nimport { StandardRetryStrategy } from \"./StandardRetryStrategy\";\nexport class AdaptiveRetryStrategy extends StandardRetryStrategy {\n  constructor(maxAttemptsProvider, options) {\n    const {\n      rateLimiter,\n      ...superOptions\n    } = options ?? {};\n    super(maxAttemptsProvider, superOptions);\n    this.rateLimiter = rateLimiter ?? new DefaultRateLimiter();\n    this.mode = RETRY_MODES.ADAPTIVE;\n  }\n  async retry(next, args) {\n    return super.retry(next, args, {\n      beforeRequest: async () => {\n        return this.rateLimiter.getSendToken();\n      },\n      afterRequest: response => {\n        this.rateLimiter.updateClientSendingRate(response);\n      }\n    });\n  }\n}","map":{"version":3,"names":["RETRY_MODES","DefaultRateLimiter","StandardRetryStrategy","AdaptiveRetryStrategy","constructor","maxAttemptsProvider","options","rateLimiter","superOptions","mode","ADAPTIVE","retry","next","args","beforeRequest","getSendToken","afterRequest","response","updateClientSendingRate"],"sources":["/home/user/Mernstack/HotelRoom/node_modules/@aws-sdk/middleware-retry/dist-es/AdaptiveRetryStrategy.js"],"sourcesContent":["import { RETRY_MODES } from \"./config\";\nimport { DefaultRateLimiter } from \"./DefaultRateLimiter\";\nimport { StandardRetryStrategy } from \"./StandardRetryStrategy\";\nexport class AdaptiveRetryStrategy extends StandardRetryStrategy {\n    constructor(maxAttemptsProvider, options) {\n        const { rateLimiter, ...superOptions } = options ?? {};\n        super(maxAttemptsProvider, superOptions);\n        this.rateLimiter = rateLimiter ?? new DefaultRateLimiter();\n        this.mode = RETRY_MODES.ADAPTIVE;\n    }\n    async retry(next, args) {\n        return super.retry(next, args, {\n            beforeRequest: async () => {\n                return this.rateLimiter.getSendToken();\n            },\n            afterRequest: (response) => {\n                this.rateLimiter.updateClientSendingRate(response);\n            },\n        });\n    }\n}\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,UAAU;AACtC,SAASC,kBAAkB,QAAQ,sBAAsB;AACzD,SAASC,qBAAqB,QAAQ,yBAAyB;AAC/D,OAAO,MAAMC,qBAAqB,SAASD,qBAAqB,CAAC;EAC7DE,WAAW,CAACC,mBAAmB,EAAEC,OAAO,EAAE;IACtC,MAAM;MAAEC,WAAW;MAAE,GAAGC;IAAa,CAAC,GAAGF,OAAO,IAAI,CAAC,CAAC;IACtD,KAAK,CAACD,mBAAmB,EAAEG,YAAY,CAAC;IACxC,IAAI,CAACD,WAAW,GAAGA,WAAW,IAAI,IAAIN,kBAAkB,EAAE;IAC1D,IAAI,CAACQ,IAAI,GAAGT,WAAW,CAACU,QAAQ;EACpC;EACA,MAAMC,KAAK,CAACC,IAAI,EAAEC,IAAI,EAAE;IACpB,OAAO,KAAK,CAACF,KAAK,CAACC,IAAI,EAAEC,IAAI,EAAE;MAC3BC,aAAa,EAAE,YAAY;QACvB,OAAO,IAAI,CAACP,WAAW,CAACQ,YAAY,EAAE;MAC1C,CAAC;MACDC,YAAY,EAAGC,QAAQ,IAAK;QACxB,IAAI,CAACV,WAAW,CAACW,uBAAuB,CAACD,QAAQ,CAAC;MACtD;IACJ,CAAC,CAAC;EACN;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}